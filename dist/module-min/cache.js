import{NodeCache}from"./type.js";const regex_css=/[^;:]+/g,regex_class=/ +/;export function setText(a,b){let c,d,e=a._mkc;e?d=e._t:a._mkc=e={},d===b?!1:(!1,!1,e._t=b,e._h=null,c=a.firstChild,c?c.nodeValue=b:a.appendChild(document.createTextNode(b)))}export function getText(a){let b,c,d=a._mkc;return d?c=d._t:a._mkc=d={},"string"!=typeof c&&(!1,!1,b=a.firstChild,d._t=c=b?b.nodeValue:""),c}export function setAttribute(a,b,c){let d=a._mkc;if(d||(a._mkc=d={}),"object"==typeof b)for(let c in b)_setAttribute(a,c,b[c],d);else _setAttribute(a,b,c,d)}function _setAttribute(a,b,c,d){d["_a"+b]===c?!1:(!1,!1,d["_a"+b]=c,!1===c?a.removeAttribute(b):a.setAttribute(b,c))}export function removeAttribute(a,b){let c=a._mkc;if(c||(a._mkc=c={}),"object"==typeof b)for(let d=0;d<b.length;d++)_removeAttribute(a,b[d],c);else _removeAttribute(a,b,c)}function _removeAttribute(a,b,c){!1===c["_a"+b]?!1:(!1,!1,c["_a"+b]=!1,a.removeAttribute(b))}export function getAttribute(a,b){let c,d=a._mkc;return d?c=d["_a"+b]:a._mkc=d={},"string"!=typeof c&&(!1,!1,c=a.getAttribute(b),d["_a"+b]=c),c}export function hasAttribute(a,b){const c=getAttribute(a,b);return!!(c||""===c)}export function setClass(a,b){let c,d=a._mkc;d?c=d._c:a._mkc=d={},"object"==typeof b&&(b=b.join(" ")),c===b?!1:(!1,!1,d._c=b,a.className=b)}export function getClass(a){let b,c=a._mkc;return c?b=c._c:a._mkc=c={},"string"!=typeof b&&(!1,!1,c._c=b=a.className),b=b.split(regex_class),""===b[0]?[]:b}function transformClassCache(a){let b,c=a._mkc;if(c?b=c._c:a._mkc=c={},!b)return c._c={};if("string"==typeof b){const a=b.trim().split(regex_class);c._c=b={};for(let c,d=0;d<a.length;d++)c=a[d],c&&(b[a[d]]=1)}return b}export function addClass(a,b){const c=transformClassCache(a);if("object"==typeof b)for(let d=0;d<b.length;d++)_addClass(a,b[d],c);else _addClass(a,b,c)}function _addClass(a,b,c){const d=c[b];d?!1:(!1,!1,c[b]=1,a.classList.add(b))}export function removeClass(a,b){const c=transformClassCache(a);if("object"==typeof b)for(let d=0;d<b.length;d++)_removeClass(a,b[d],c);else _removeClass(a,b,c)}function _removeClass(a,b,c){const d=c[b];0===d?!1:(!1,!1,c[b]=0,a.classList.remove(b))}export function hasClass(a,b){const c=transformClassCache(a);let d=c[b];return"number"!=typeof d&&(!1,!1,c[b]=d=a.classList.contains(b)?1:0),!!d}export function toggleClass(a,b,c){const d=transformClassCache(a);if(!("object"==typeof b))_toggleClass(a,b,c,d);else if(b.constructor===Array)for(let e=0;e<b.length;e++)_toggleClass(a,b[e],c,d);else for(let c in b)_toggleClass(a,c,b[c],d)}function _toggleClass(a,b,c,d){let e=!!d[b];c="undefined"==typeof c?!e:!!c,e===c?!1:(!1,!1,d[b]=c?1:0,c?a.classList.add(b):a.classList.remove(b))}export function setCss(a,b){let c,d=a._mkc;d?c=d._s:a._mkc=d={},c===b?!1:(!1,!1,d._s=b,a.style.cssText=b)}export function getCss(a){let b,c=a._mkc;return c?b=c._s:a._mkc=c={},"string"!=typeof b&&(!1,!1,c._s=b=a.style.cssText),b}function transformStyleCache(a){let b,c=a._mkc;if(c?b=c._s:a._mkc=c={},!b)return c._s={};if("string"==typeof b){const a=b.match(regex_css);c._s=b={};for(let c=0;c<a.length;c+=2)b[a[c].trim()]=a[c+1].trim()}return b}export function setStyle(a,b,c){const d=transformStyleCache(a),e=a.style;if("object"==typeof b)for(const c in b)_setStyle(a,c,b[c],e,d);else _setStyle(a,b,c,e,d)}function _setStyle(a,b,c,d,e){e[b]===c?!1:(!1,!1,e[b]=c,(d||a.style).setProperty(b,c))}export function getStyle(a,b){const c=transformStyleCache(a);let d=c[b];return"string"!=typeof d&&(!1,!1,c[b]=d=a.style.getPropertyValue(b)),d}export function setHtml(a,b){let c,d=a._mkc;d?c=d._h:a._mkc=d={},c===b?!1:(!1,!1,a.innerHTML=b,d._h=b,d._t=null)}export function getHtml(a){let b,c=a._mkc;return c?b=c._h||c._t:a._mkc=c={},"string"!=typeof b&&(!1,!1,c._h=b=a.innerHTML),b}